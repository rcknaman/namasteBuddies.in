class chatEngine{constructor(e,s,o){this.chatBox=$("#"+e),this.userEmail=s,this.userId=o,this.socket=io.connect("http://localhost:5000"),this.userEmail&&this.connectionHandler()}connectionHandler(){let o=this;this.socket.on("connect",function(){console.log("connection extablished using sockets"),o.socket.emit("join_room",{user_email:o.userEmail,chatroom:"codial"}),o.socket.on("user_joined",function(e){console.log("a user joined!",e)}),$(">form>button",o.chatBox).click(function(e){e.preventDefault();e=$(">form>input",o.chatBox).val();0<e.length&&($(">form>input",o.chatBox).val(""),o.socket.emit("send_message",{chatroomName:"codial",email:o.userEmail,message:e,userId:o.userId}))}),o.socket.on("new_message",function(e){console.log("new message recieved",e);let s="friend-msg";e.email==o.userEmail&&(s="self-msg");e=`<li class="${s} message">
                    ${e.message}
                </li>`;$(" #messages",o.chatBox).append(e)})})}}